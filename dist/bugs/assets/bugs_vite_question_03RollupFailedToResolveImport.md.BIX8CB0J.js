import{_ as s,c as i,o as a,ac as e}from"./chunks/framework.H47pho3c.js";const g=JSON.parse('{"title":"[vite]: Rollup failed to resolve import xxxxx","description":"","frontmatter":{},"headers":[],"relativePath":"bugs/vite/question/03RollupFailedToResolveImport.md","filePath":"bugs/vite/question/03RollupFailedToResolveImport.md","lastUpdated":1710559693000}'),n={name:"bugs/vite/question/03RollupFailedToResolveImport.md"},l=e(`<h1 id="vite-rollup-failed-to-resolve-import-xxxxx" tabindex="-1">[vite]: Rollup failed to resolve import xxxxx <a class="header-anchor" href="#vite-rollup-failed-to-resolve-import-xxxxx" aria-label="Permalink to &quot;[vite]: Rollup failed to resolve import xxxxx&quot;">​</a></h1><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p>Jenkins构建vue3项目时报错，log如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[error] [31m[vite]: Rollup failed to resolve import </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@babel/runtime/helpers/asyncToGenerator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> from </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_modules/.pnpm/@antv+g-webgpu@0.7.2/node_modules/@antv/g-webgpu/es/Kernel.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">This is most likely unintended because it can </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> your application at runtime.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">If you </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> want to externalize this module explicitly add it to</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build.rollupOptions.external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[39m</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[error] [31merror during build:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Error: [vite]: Rollup failed to resolve import </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@babel/runtime/helpers/asyncToGenerator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> from </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node_modules/.pnpm/@antv+g-webgpu@0.7.2/node_modules/@antv/g-webgpu/es/Kernel.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">This is most likely unintended because it can </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> your application at runtime.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">If you </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> want to externalize this module explicitly add it to</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build.rollupOptions.external</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    at onRollupWarning (file:///data/jenkins/workspace/ever-digitalfactory-develop-app-ppm-e2392d6ad476d483127ce365e5b7bbcd/node_modules/.pnpm/vite@3.2.8_sass@1.70.0+terser@5.27.0/node_modules/vite/dist/node/chunks/dep-f11f7337.js:45909:19)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    at onwarn (file:///data/jenkins/workspace/ever-digitalfactory-develop-app-ppm-e2392d6ad476d483127ce365e5b7bbcd/node_modules/.pnpm/vite@3.2.8_sass@1.70.0+terser@5.27.0/node_modules/vite/dist/node/chunks/dep-f11f7337.js:45680:13)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    at Object.onwarn (file:///data/jenkins/workspace/ever-digitalfactory-develop-app-ppm-e2392d6ad476d483127ce365e5b7bbcd/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/es/shared/rollup.js:23263:13)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    at ModuleLoader.handleResolveId (file:///data/jenkins/workspace/ever-digitalfactory-develop-app-ppm-e2392d6ad476d483127ce365e5b7bbcd/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/es/shared/rollup.js:22158:26)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    at file:///data/jenkins/workspace/ever-digitalfactory-develop-app-ppm-e2392d6ad476d483127ce365e5b7bbcd/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/es/shared/rollup.js:22119:26</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    at async Promise.all (index </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[39m</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ELIFECYCLE  Command failed with exit code 1.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Build step </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Execute shell&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> marked build as failure</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Finished: FAILURE</span></span></code></pre></div><h2 id="产生原因" tabindex="-1">产生原因 <a class="header-anchor" href="#产生原因" aria-label="Permalink to &quot;产生原因&quot;">​</a></h2><h2 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConfigEnv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserConfigExport</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> env</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadEnv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mode, root)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 其他配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                external: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@antv/g6&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,7),t=[l];function p(h,k,d,r,o,E){return a(),i("div",null,t)}const u=s(n,[["render",p]]);export{g as __pageData,u as default};
