import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.53eb7688.js";const p="/bugs/assets/4.458379cb.png",C=JSON.parse('{"title":"BtTable修改列名不生效","description":"","frontmatter":{},"headers":[],"relativePath":"bugs/beeboat/question/4.md","filePath":"bugs/beeboat/question/4.md"}'),o={name:"bugs/beeboat/question/4.md"},e=l('<h1 id="bttable修改列名不生效" tabindex="-1">BtTable修改列名不生效 <a class="header-anchor" href="#bttable修改列名不生效" aria-label="Permalink to &quot;BtTable修改列名不生效&quot;">​</a></h1><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p><img src="'+p+`" alt="BtTable修改列名不生效"></p><p>业务需求需要修改特定列名，按常规修改base中生成的列数据，如下：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// src/base/views/app/material-transport-page/components/base-material-transport-bt-table-context.ts</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ComponentInternalInstance, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { BtTableComponentContext } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;beeboat-ui&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> BtCommon </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;beeboat-ui/es/common&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { MaterialTransportItemApi } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@/base/consts/api/mes/index&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { UnitDescApi } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@/base/consts/api/basic/index&#39;</span></span>
<span class="line"><span style="color:#6A737D;">//MaterialTransportBtTable</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">BaseMaterialTransportBtTableContext</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">BtTableComponentContext</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">vueInstance</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ComponentInternalInstance</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// ................</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.columnList </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span></span>
<span class="line"><span style="color:#E1E4E8;">                id: </span><span style="color:#9ECBFF;">&#39;18x1xF9vDSGzrpAyeN2ScN&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                label: </span><span style="color:#9ECBFF;">&#39;[已修改]生产物料转运单号&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                prop: </span><span style="color:#9ECBFF;">&#39;transportNo&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                i18nKey: </span><span style="color:#9ECBFF;">&#39;MaterialTransportPage.MaterialTransportBtTable.TransportNo&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                width: </span><span style="color:#9ECBFF;">&#39;200px&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                fixed: </span><span style="color:#9ECBFF;">&#39;left&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                columnType: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                searchProps: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                    enable: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    componentType: </span><span style="color:#9ECBFF;">&#39;text&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                    supportConditionList: [</span><span style="color:#9ECBFF;">&#39;ne&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;like&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;eq&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;isNull&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;notlike&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;isNotNull&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">                },</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">// ................</span></span>
<span class="line"><span style="color:#E1E4E8;">        ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// src/base/views/app/material-transport-page/components/base-material-transport-bt-table-context.ts</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ComponentInternalInstance, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { BtTableComponentContext } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;beeboat-ui&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> BtCommon </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;beeboat-ui/es/common&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { MaterialTransportItemApi } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@/base/consts/api/mes/index&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { UnitDescApi } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@/base/consts/api/basic/index&#39;</span></span>
<span class="line"><span style="color:#6A737D;">//MaterialTransportBtTable</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">BaseMaterialTransportBtTableContext</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">BtTableComponentContext</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">constructor</span><span style="color:#24292E;">(</span><span style="color:#E36209;">vueInstance</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ComponentInternalInstance</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// ................</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.columnList </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">            {</span></span>
<span class="line"><span style="color:#24292E;">                id: </span><span style="color:#032F62;">&#39;18x1xF9vDSGzrpAyeN2ScN&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                label: </span><span style="color:#032F62;">&#39;[已修改]生产物料转运单号&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                prop: </span><span style="color:#032F62;">&#39;transportNo&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                i18nKey: </span><span style="color:#032F62;">&#39;MaterialTransportPage.MaterialTransportBtTable.TransportNo&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                width: </span><span style="color:#032F62;">&#39;200px&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                fixed: </span><span style="color:#032F62;">&#39;left&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                columnType: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                searchProps: {</span></span>
<span class="line"><span style="color:#24292E;">                    enable: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    componentType: </span><span style="color:#032F62;">&#39;text&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                    supportConditionList: [</span><span style="color:#032F62;">&#39;ne&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;like&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;eq&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;isNull&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;notlike&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;isNotNull&#39;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">                },</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6A737D;">// ................</span></span>
<span class="line"><span style="color:#24292E;">        ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>修改完成后，仅高级搜索的查询条件名称被修改成功，表格列名没有变化。</p><h2 id="产生原因" tabindex="-1">产生原因 <a class="header-anchor" href="#产生原因" aria-label="Permalink to &quot;产生原因&quot;">​</a></h2><p>BtTable2在生成代码的时候分为usage/base/locales等文件。</p><p>列名相关代码存在于base中的ts文件以及locales中的语言配置文件，如下：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// src/base/locales/lang/app/material-transport-page/zh-CN.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    MaterialTransportPage: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        MaterialTransportBtTable: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                column1676255746038 : </span><span style="color:#9ECBFF;">&#39;筛选&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                column1676255746037 : </span><span style="color:#9ECBFF;">&#39;序号&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                **TransportNo : </span><span style="color:#9ECBFF;">&#39;生产物料转运单号&#39;</span><span style="color:#E1E4E8;">,**</span></span>
<span class="line"><span style="color:#E1E4E8;">                WorkOrderNo : </span><span style="color:#9ECBFF;">&#39;工单号&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                WorkTokenNo : </span><span style="color:#9ECBFF;">&#39;WBS编码&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                WbsCode : </span><span style="color:#9ECBFF;">&#39;wbs编码&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                MaterialNo : </span><span style="color:#9ECBFF;">&#39;物料编码&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                MaterialName : </span><span style="color:#9ECBFF;">&#39;物料名称&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                FigureNumber : </span><span style="color:#9ECBFF;">&#39;图号&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                TransportQty : </span><span style="color:#9ECBFF;">&#39;申请转运数量&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                TransportStatus : </span><span style="color:#9ECBFF;">&#39;转运单状态&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                ForwardStatus : </span><span style="color:#9ECBFF;">&#39;发运状态&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                ActualTransportQty : </span><span style="color:#9ECBFF;">&#39;实际转运数量&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                unit : </span><span style="color:#9ECBFF;">&#39;单位&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                PlanFinishTime : </span><span style="color:#9ECBFF;">&#39;工单计划完成日期&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                ActualForwardDate : </span><span style="color:#9ECBFF;">&#39;实际发运日期&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                BranchCompanyName : </span><span style="color:#9ECBFF;">&#39;所属组织&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                IfForward : </span><span style="color:#9ECBFF;">&#39;是否发运&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                CreatorName : </span><span style="color:#9ECBFF;">&#39;创建人&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                GmtCreate : </span><span style="color:#9ECBFF;">&#39;创建日期&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// src/base/locales/lang/app/material-transport-page/zh-CN.js</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    MaterialTransportPage: {</span></span>
<span class="line"><span style="color:#24292E;">        MaterialTransportBtTable: {</span></span>
<span class="line"><span style="color:#24292E;">                column1676255746038 : </span><span style="color:#032F62;">&#39;筛选&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                column1676255746037 : </span><span style="color:#032F62;">&#39;序号&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                **TransportNo : </span><span style="color:#032F62;">&#39;生产物料转运单号&#39;</span><span style="color:#24292E;">,**</span></span>
<span class="line"><span style="color:#24292E;">                WorkOrderNo : </span><span style="color:#032F62;">&#39;工单号&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                WorkTokenNo : </span><span style="color:#032F62;">&#39;WBS编码&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                WbsCode : </span><span style="color:#032F62;">&#39;wbs编码&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                MaterialNo : </span><span style="color:#032F62;">&#39;物料编码&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                MaterialName : </span><span style="color:#032F62;">&#39;物料名称&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                FigureNumber : </span><span style="color:#032F62;">&#39;图号&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                TransportQty : </span><span style="color:#032F62;">&#39;申请转运数量&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                TransportStatus : </span><span style="color:#032F62;">&#39;转运单状态&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                ForwardStatus : </span><span style="color:#032F62;">&#39;发运状态&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                ActualTransportQty : </span><span style="color:#032F62;">&#39;实际转运数量&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                unit : </span><span style="color:#032F62;">&#39;单位&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                PlanFinishTime : </span><span style="color:#032F62;">&#39;工单计划完成日期&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                ActualForwardDate : </span><span style="color:#032F62;">&#39;实际发运日期&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                BranchCompanyName : </span><span style="color:#032F62;">&#39;所属组织&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                IfForward : </span><span style="color:#032F62;">&#39;是否发运&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                CreatorName : </span><span style="color:#032F62;">&#39;创建人&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                GmtCreate : </span><span style="color:#032F62;">&#39;创建日期&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>列名没有生效的主要原因在于，功能对应的语言文件zh-CN.js中没有对应修改。</p><h2 id="解决步骤" tabindex="-1">解决步骤 <a class="header-anchor" href="#解决步骤" aria-label="Permalink to &quot;解决步骤&quot;">​</a></h2><ol><li>修改功能对应的base代码中生成的columnlist</li><li>如果1不生效，检查生成的多语言文件zh-CN.js</li></ol>`,13),t=[e];function c(r,E,y,i,F,m){return a(),n("div",null,t)}const d=s(o,[["render",c]]);export{C as __pageData,d as default};
