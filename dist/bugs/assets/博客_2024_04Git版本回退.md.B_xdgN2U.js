import{_ as s,c as i,o as a,ac as n}from"./chunks/framework.H47pho3c.js";const o=JSON.parse('{"title":"Git版本回退的处理","description":"","frontmatter":{},"headers":[],"relativePath":"博客/2024/04Git版本回退.md","filePath":"博客/2024/04Git版本回退.md","lastUpdated":1711087405000}'),h={name:"博客/2024/04Git版本回退.md"},t=n(`<h1 id="git版本回退的处理" tabindex="-1">Git版本回退的处理 <a class="header-anchor" href="#git版本回退的处理" aria-label="Permalink to &quot;Git版本回退的处理&quot;">​</a></h1><h2 id="问题场景" tabindex="-1">问题场景 <a class="header-anchor" href="#问题场景" aria-label="Permalink to &quot;问题场景&quot;">​</a></h2><p>平台近期没有发布计划，但是同事反馈平台存在小bug有点影响使用，但是距离上次发布<code>develop</code>分支已经增加了很多代码，不可以直接合并代码到<code>product</code>，就只能通过修改<code>product</code>分支的指定文件。</p><p>问题来了，这个时候如果已经切换到<code>product</code>分支完成了合并，并且push了。</p><p>这个时候就需要进行回退操作。</p><h2 id="回退操作" tabindex="-1">回退操作 <a class="header-anchor" href="#回退操作" aria-label="Permalink to &quot;回退操作&quot;">​</a></h2><p>由于合并的代码过多，需要谨慎处理。</p><h3 id="查看提交log" tabindex="-1">查看提交log <a class="header-anchor" href="#查看提交log" aria-label="Permalink to &quot;查看提交log&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zhiyong.yu@yuuuuuu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> beeboat-designer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> e17dcb68230de111b1daf14373580f505137d616</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (HEAD -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> product,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin/product</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Author:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Fri</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10:59:16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fix:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 补充fix</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0cda57f085b271e05633ab25abb2bdb79fe04ac7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Author:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Fri</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10:17:17</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fix:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 属性丢失fix</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ad6a5f9edf117e6381824adeee89d06fda2e05df</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Author:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Mon</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 08:47:48</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fix:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 隐藏弹窗数据更新提示</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fb81ff8c8907c0979b957e790f08ccb1ed392132</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Author:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16:43:40</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fix:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 消息滚动时间调整为5秒</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eea9565ab659693fcdd7683b7f5ce4c5a5a9d08f</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Merge:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0aedb817c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 5142be6ca</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Author:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 15:35:09</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Merge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;develop&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ********</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> into</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> develop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0aedb817c6693409b39a5b0b73fbf9bb3f5c8cb3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Author:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ************</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 15:34:42</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0800</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fix:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 修改form报错</span></span></code></pre></div><p>找到<code>commit 0aedb817c6693409b39a5b0b73fbf9bb3f5c8cb3</code>后, 可以查看对应hash的提交内容</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0aedb817c6693409b39a5b0b73fbf9bb3f5c8cb3</span></span></code></pre></div><h3 id="撤回合并" tabindex="-1">撤回合并 <a class="header-anchor" href="#撤回合并" aria-label="Permalink to &quot;撤回合并&quot;">​</a></h3><p>操作的目的仅仅是撤回合并，因为合并过去的代码涉及到很多内容，不可以无脑硬撤回，硬撤回会造成代码丢失。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --soft</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">commit-hash-before-merg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>找到要退回的hash</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --soft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0aedb817c6693409b39a5b0b73fbf9bb3f5c8cb3</span></span></code></pre></div><p>注意：软撤回后，合并到<code>product</code>的代码会在出现在<code>暂存的更改</code>中</p><blockquote><p>git reset --hard commit-hash 也可以使用 --hard 进行硬提交，硬提交会直接丢掉指定hash之后的代码。谨慎使用</p></blockquote><h3 id="强制提交" tabindex="-1">强制提交 <a class="header-anchor" href="#强制提交" aria-label="Permalink to &quot;强制提交&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">branch-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force</span></span></code></pre></div><p>强制提交后可以通过<code>git log</code>查看，远程分支已经回退到hash值了</p><h3 id="暂存区的代码" tabindex="-1">暂存区的代码 <a class="header-anchor" href="#暂存区的代码" aria-label="Permalink to &quot;暂存区的代码&quot;">​</a></h3><p>本次撤回完成后，<code>product</code>代码处理完成后，暂存区的代码就可以再次正常提交了</p>`,24),l=[t];function p(k,e,F,d,r,c){return a(),i("div",null,l)}const C=s(h,[["render",p]]);export{o as __pageData,C as default};
