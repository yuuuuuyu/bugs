<!--
 * @Description: 
 * @Author: (äºæ™ºå‹‡)zhiyong.yu@ytever.com
 * @Date: 2025-01-07 16:39:20
 * @LastEditors: (äºæ™ºå‹‡)zhiyong.yu@ytever.com
 * @LastEditTime: 2025-01-07 17:44:18
-->
# å¦‚ä½•åŠ¨æ€æ§åˆ¶è¡¨å•é¡¹çš„æ ¡éªŒ
:::info
åœ¨ä¸Šä¸€ä»£èœ‚èˆŸä¸­ï¼Œå¦‚æœè¦å®ç°åŠ¨æ€æ§åˆ¶è¡¨å•é¡¹çš„æ ¡éªŒï¼Œæ˜¯éœ€è¦é‡å†™é¡µé¢ä»£ç å’Œé‡å†™é€»è¾‘çš„

åœ¨æ–°ç‰ˆèœ‚èˆŸä¸­ï¼Œæ­£å¸¸é…ç½®å¸¦æ ¡éªŒçš„è¡¨å•å³å¯ï¼Œé‡å†™ä¹Ÿä¸éœ€è¦é‡å†™é¡µé¢ä»£ç ï¼Œåªéœ€è¦é‡å†™ä¸€ç‚¹é€»è¾‘å³å¯ã€‚

æ•ˆç‡æå‡å˜å˜ğŸ¦†çš„
:::
## æ¡ˆä¾‹æ•ˆæœ
![å¦‚ä½•åŠ¨æ€æ§åˆ¶è¡¨å•é¡¹çš„æ ¡éªŒ](/drawing-bed/20250106/åŠ¨æ€æ§åˆ¶è¡¨å•é¡¹æ ¡éªŒ.png)


## é‡å†™ä»£ç 

```ts
import { BTPUtils, BTPDialogViewContext } from 'beeboat-plus'
import { nextTick } from 'vue';
import { cloneDeep } from 'lodash-es';
import CustomUtils from '@/utils';
import Api from "./api"

/**
 * 1. å‘½åè§„åˆ™ PageCode+ViewContext
 * 2. æ™®é€šé¡µé¢ç»§æ‰¿BTPViewContext
 * 3. å¼¹çª—é¡µé¢ç»§æ‰¿BTPDialogViewContext
 * 4. é‡å†™é¡µé¢ç»„ä»¶éœ€è¦é€šè¿‡ç»„ä»¶Codeå…³è”
 *
 */
export default class RepairtypeEditPageViewContext extends BTPDialogViewContext {
    constructor(vueInstance?: any, viewId?: string, viewModelId?: string, parentViewContext?: any) {
        super(vueInstance, viewId, viewModelId, parentViewContext)
    }
    executeAction(executor) {
        const _form = this.viewModel.components?.[0].children
        const maintainTypeCodeFormItem = this.findObjectByCode(_form, 'maintainTypeCodeFormItem')
        const maintainTypeCode = this.findObjectByCode(_form, 'MaintainTypeCode')
        if (executor.isEvent('onOpenDialog', 'BtpDialog3704449017')) {
            const _row = cloneDeep(executor.row)
            Api.listPage({
                pageNumber: 1,
                pageSize: 1000,
                ruleStatus: 1,
                code: 'MaintainDescType',
            }).then(res=>{
                const isDefault = Boolean(res.data.records.find(x => x.code == 'MaintainDescType'))
                if(_row.id){
                    // æ‰‹åŠ¨è®¾ç½®ç»„ä»¶å±æ€§
                    this.setComponentProp('MaintainTypeCode','disabled', true);
                }else{
                    this.setComponentProp('MaintainTypeCode','disabled', isDefault);
                }
                if(isDefault) {
                    maintainTypeCodeFormItem.props.rules[0].required = false
                    maintainTypeCode.props.placeholder = 'ä¾æ®ç¼–ç è§„åˆ™ç”Ÿæˆ'
                } else {
                    maintainTypeCodeFormItem.props.rules[0].required = true
                    maintainTypeCode.props.placeholder = 'è¯·è¾“å…¥'
                }
            })
        }
        return super.executeAction(executor)
    }

    /**
     * é€’å½’æŸ¥æ‰¾å¯¹è±¡æ•°ç»„ä¸­æŒ‡å®šcodeçš„å¯¹è±¡
     * @param {Array} array - å¯¹è±¡æ•°ç»„
     * @param {string} targetCode - ç›®æ ‡code
     * @returns {Object|null} - æ‰¾åˆ°çš„å¯¹è±¡ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›null
     */
    findObjectByCode(array, targetCode) {
        const search = (items) => {
            for (let item of items) {
            if (item.code === targetCode) {
                return item;
            }
            if (item.children) {
                const found = search(item.children);
                if (found) {
                return found;
                }
            }
            }
            return null;
        };

        return search(array);
    }
}

```